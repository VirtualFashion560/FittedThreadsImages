<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fitted Threads - Try On</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
<style>
body { margin:0; background:linear-gradient(135deg,#d9b382,#a46237); color:#4b3221; font-family:'Poppins',sans-serif; text-align:center; padding:20px; min-height:100vh; }
h1 { font-family:'Pacifico',cursive; font-size:3rem; color:#6e4b26; margin-bottom:0.5em; }
.preview-container { display:flex; justify-content:center; gap:20px; margin:1em 0; }
.preview-container img { max-width:250px; max-height:250px; border-radius:12px; }
.result-section { margin-top:2em; }
.result-section h2 { font-size:1.8rem; margin-bottom:1em; color:#6e4b26; }
.result-section img, .result-section video { max-width:80%; border-radius:12px; margin:1em 0; box-shadow:0 0 10px rgba(0,0,0,0.2); }
.btn { padding:10px 25px; font-size:1rem; font-weight:600; border:none; border-radius:8px; cursor:pointer; background-color:#6e4b26; color:#fff; transition:0.3s; margin:10px; }
.btn:hover { background-color:#7a5a34; }
</style>
</head>
<body>

<h1>Fitted Threads - Try On</h1>

<div class="preview-container">
<img id="selfPreview" src="" alt="Your Image"/>
<img id="clothPreview" src="" alt="Clothing Image"/>
</div>

<div class="result-section">
<h2>AI Generated Image</h2>
<img id="aiImage" src="" alt="AI Result"/>
</div>

<div class="result-section">
<h2>AI Generated Video</h2>
<video id="aiVideo" controls></video>
</div>

<button class="btn" onclick="window.location.href='index.html'">Back</button>

<script>
const selfPreview = document.getElementById('selfPreview');
const clothPreview = document.getElementById('clothPreview');
const aiImage = document.getElementById('aiImage');
const aiVideo = document.getElementById('aiVideo');

const selfImage = localStorage.getItem('selfImage');
const clothImage = localStorage.getItem('clothImage');

if (!selfImage || !clothImage) {
alert('No images found. Redirecting to upload page.');
window.location.href = 'index.html';
} else {
selfPreview.src = selfImage;
clothPreview.src = clothImage;

// Call backend API for AI generation
async function generateAI() {
try {
const response = await fetch('/api/generate', {
method: 'POST',
headers: { 'Content-Type': 'application/json' },
body: JSON.stringify({ selfImage, clothImage })
});
const data = await response.json();
aiImage.src = data.aiImageUrl;
aiVideo.src = data.aiVideoUrl;
} catch (err) {
console.error(err);
alert('Error generating AI content. Try again later.');
}
}

generateAI();
}
</script>

</body>
</html>
