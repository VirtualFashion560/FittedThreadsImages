<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Fitted Threads - Try On</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;700&display=swap" rel="stylesheet">

<style>
 body {
   margin: 0;
   background: linear-gradient(135deg, #a46237, #d9b382);
   color: #4b3221;
   font-family: 'Poppins', sans-serif;
   text-align: center;
   padding: 20px;
   overflow-x: hidden;
 }

 h1 {
   font-family: 'Pacifico', cursive;
   font-size: 3rem;
   color: #6e4b26;
   margin-bottom: 0.3em;
 }

 .slogan {
   font-style: italic;
   font-weight: 600;
   color: #7a5a34;
   font-size: 1.2rem;
   margin-bottom: 0.8em;
 }

 .top-buttons {
   display: flex;
   justify-content: flex-start;
   align-items: center;
   margin-bottom: 1em;
 }

 .back-button {
   background: none;
   border: none;
   font-size: 1.2rem;
   font-weight: 600;
   cursor: pointer;
   color: #4b3221;
   display: flex;
   align-items: center;
 }

 .back-button:hover {
   color: #d9b382;
 }

 .back-button span {
   margin-left: 0.5em;
 }

 .previews {
   display: flex;
   justify-content: center;
   gap: 15px;
   flex-wrap: wrap;
   margin-bottom: 1em;
 }

 .previews img {
   width: 180px;
   height: 180px;
   object-fit: cover;
   border-radius: 12px;
   border: 2px solid #7a5a34;
 }

 .ai-results {
   display: flex;
   justify-content: center;
   gap: 20px;
   margin: 1.5em 0;
   flex-wrap: wrap;
 }

 .ai-placeholder {
   width: 300px;
   height: 300px;
   background: rgba(217, 179, 130, 0.3);
   border-radius: 12px;
   display: flex;
   justify-content: center;
   align-items: center;
   font-weight: 600;
   color: #4b3221;
   position: relative;
   overflow: hidden;
 }

 /* AI Placeholder Loading Spinner */
 .ai-placeholder.loading {
   color: transparent;
 }
 .ai-placeholder.loading::after {
   content: "";
   position: absolute;
   width: 50px;
   height: 50px;
   border: 4px solid #d9b382;
   border-top: 4px solid #6e4b26;
   border-radius: 50%;
   animation: spin 1s linear infinite;
 }
 @keyframes spin {
   0% { transform: rotate(0); }
   100% { transform: rotate(360deg); }
 }

 /* Dropdown Catalog */
 .catalog-dropdown {
   margin: 1em auto;
   max-width: 300px;
 }
 .catalog-dropdown select {
   width: 100%;
   padding: 10px;
   border-radius: 8px;
   border: 2px solid #7a5a34;
   font-size: 1rem;
   font-weight: 600;
   cursor: pointer;
   background: #f5e3d0;
   color: #4b3221;
 }

 .save-button {
   margin-top: 1em;
   padding: 10px 25px;
   background-color: #6e4b26;
   color: white;
   border: none;
   border-radius: 8px;
   cursor: pointer;
   font-weight: 600;
   display: none; /* hidden until AI results appear */
 }

 .save-button:hover {
   background-color: #7a5a34;
 }

 /* Footer Styles */
 footer.cutoff-footer {
   background: linear-gradient(135deg, #7e521f, #b58332);
   color: white;
   clip-path: polygon(0 10%, 100% 0%, 100% 100%, 0% 100%);
   padding: 2em 1em;
   margin-top: 3em;
   text-align: center;
   font-size: 0.9rem;
 }

 .footer-links {
   list-style: none;
   padding: 0;
   margin: 0 0 1.5em 0;
 }

 .footer-links li {
   margin: 5px 0;
 }

 .footer-links a {
   color: white;
   text-decoration: none;
   font-weight: 500;
 }

 .footer-links a:hover {
   color: #d9b382;
 }

 .social {
   margin-top: 1em;
 }

 .social-link {
   display: inline-block;
   margin: 0 10px;
   color: white;
   transition: color 0.3s ease;
   font-size: 1.5rem;
 }

 .social-link:hover {
   color: #d9b382;
 }

 .social-link svg {
   width: 28px;
   height: 28px;
   vertical-align: middle;
 }

 /* Search Bar */
 .gcse-search {
   margin: 1em auto;
   max-width: 300px;
   text-align: center;
 }
</style>
</head>
<body>

<div class="top-buttons">
 <button class="back-button" onclick="location.href='index.html'">‚Üê <span>Home</span></button>
</div>

<h1>Fitted Threads</h1>
<p class="slogan">Find Your Inspiration</p>
<p class="slogan">Build Your Confidence</p>
<p class="slogan">Elevate Your Threads</p>

<div class="previews" id="imagePreviews"></div>

<!-- Dropdown instead of fixed catalog -->
<div class="catalog-dropdown">
 <select id="catalogSelect" onchange="swapItem(this.value)">
   <option value="">Choose an outfit item...</option>
   <option value="https://via.placeholder.com/180x180?text=Top+1">Top 1</option>
   <option value="https://via.placeholder.com/180x180?text=Top+2">Top 2</option>
   <option value="https://via.placeholder.com/180x180?text=Bottom+1">Bottom 1</option>
   <option value="https://via.placeholder.com/180x180?text=Bottom+2">Bottom 2</option>
 </select>
</div>

<div class="ai-results">
 <div class="ai-placeholder">AI Image Result</div>
 <div class="ai-placeholder">AI Video Result</div>
</div>

<button class="save-button" id="saveButton" onclick="location.href='save.html'">
  Save Outfit
</button>

<!-- Google Custom Search -->
<script async src="https://cse.google.com/cse.js?cx=a6c263093879d47b6"></script>
<div class="gcse-search"></div>

<footer class="cutoff-footer" role="contentinfo" aria-label="Footer">
 <ul class="footer-links">
   <li><a href="privacy.html">Privacy Policy</a></li>
   <li><a href="terms.html">Terms &amp; Conditions</a></li>
   <li><a href="about.html">About Us</a></li>
   <li><a href="contact.html">Contact Us</a></li>
 </ul>

 <div class="social">
   <a href="https://facebook.com/fittedthreads" target="_blank" rel="noopener" class="social-link" aria-label="Facebook">
     <svg role="img" viewBox="0 0 24 24" fill="currentColor"><path d="M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12c0 4.991 3.657 9.128 8.438 9.877v-6.987h-2.54V12h2.54v-2.173c0-2.507 1.492-3.89 3.777-3.89 1.094 0 2.238.196 2.238.196v2.46h-1.26c-1.243 0-1.63.772-1.63 1.562V12h2.773l-.443 2.89h-2.33v6.987C18.343 21.128 22 16.991 22 12z"/></svg>
   </a>
   <a href="https://instagram.com/fittedthreads" target="_blank" rel="noopener" class="social-link" aria-label="Instagram">
     <svg role="img" viewBox="0 0 24 24" fill="currentColor"><path d="M7.75 2h8.5C19.55 2 22 4.45 22 7.75v8.5c0 3.3-2.45 5.75-5.75 5.75h-8.5C4.45 22 2 19.55 2 16.25v-8.5C2 4.45 4.45 2 7.75 2zm0 2C5.68 4 4 5.68 4 7.75v8.5C4 18.32 5.68 20 7.75 20h8.5c2.07 0 3.75-1.68 3.75-3.75v-8.5C20 5.68 18.32 4 16.25 4h-8.5zm8.25 1.5a1 1 0 110 2 1 1 0 010-2zm-4.25 1a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6z"/></svg>
   </a>
 </div>
</footer>

<script>
 const previews = document.getElementById('imagePreviews');
 const storedUserImage = sessionStorage.getItem('userImage');
 const storedClothingImage = sessionStorage.getItem('clothingImage');
 const aiPlaceholders = document.querySelectorAll('.ai-placeholder');
 const saveButton = document.getElementById('saveButton');

 // Restore both previews if available
 if (storedUserImage) {
   const img = document.createElement('img');
   img.src = storedUserImage;
   img.alt = "User Uploaded";
   previews.appendChild(img);
 }
 if (storedClothingImage) {
   const img = document.createElement('img');
   img.src = storedClothingImage;
   img.alt = "Clothing Uploaded";
   previews.appendChild(img);
 }

 function swapItem(selectedSrc){
   if (!selectedSrc) return;

   let previewImages = previews.querySelectorAll('img');

   // Ensure user preview exists
   if (previewImages.length === 0 && storedUserImage) {
     const img = document.createElement('img');
     img.src = storedUserImage;
     img.alt = "User Uploaded";
     previews.appendChild(img);
     previewImages = previews.querySelectorAll('img');
   }

   // Add/replace clothing preview
   if (previewImages.length < 2) {
     const img = document.createElement('img');
     img.src = selectedSrc;
     img.alt = "Selected Outfit";
     previews.appendChild(img);
   } else {
     previewImages[1].src = selectedSrc;
   }

   // Save clothing choice
   sessionStorage.setItem('clothingImage', selectedSrc);

   // Show AI loading animation
   aiPlaceholders.forEach(ph => {
     ph.classList.add('loading');
     ph.innerHTML = "";
   });

   // Fake AI result after 3s
   setTimeout(() => {
     const aiImageSrc = "https://via.placeholder.com/300x300?text=AI+Image";
     const aiVideoSrc = "https://www.w3schools.com/html/mov_bbb.mp4";

     aiPlaceholders[0].classList.remove('loading');
     aiPlaceholders[0].innerHTML = `<img src="${aiImageSrc}" 
                                      alt="AI Image Result" style="width:100%; height:100%; object-fit:cover; border-radius:12px;">`;

     aiPlaceholders[1].classList.remove('loading');
     aiPlaceholders[1].innerHTML = `
       <video width="300" height="300" autoplay muted loop style="border-radius:12px; object-fit:cover;">
         <source src="${aiVideoSrc}" type="video/mp4">
         Your browser does not support the video tag.
       </video>`;

     // Save AI results to sessionStorage
     sessionStorage.setItem('aiImageResult', aiImageSrc);
     sessionStorage.setItem('aiVideoResult', aiVideoSrc);

     // Show Save button
     saveButton.style.display = "inline-block";
   }, 3000);
 }
</script>

</body>
</html>
